package anORB;

import java.io.IOException;
import java.io.OutputStream;
import java.net.InetAddress;
import java.net.Socket;

public class NamingContext {

	private int[] keyAddr;
	private InetAddress ip;
	private int port;

	public NamingContext(InetAddress ip, int port) {
		this.ip = ip;
		this.port = port;

		keyAddr = new int[] { 0xAF, 0xAB, 0xCB, 0x00, 0x00, 0x00, 0x00, 0x22,
				0x00, 0x00, 0x03, 0xE8, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x08,
				0x52, 0x6f, 0x6F, 0x74, 0x50, 0x4f, 0x41, 0x00, 0x00, 0x00,
				0x00, 0x0c, 0x4e, 0x61, 0x6d, 0x65, 0x53, 0x65, 0x72, 0x76,
				0x69, 0x63, 0x65, 0x00, 0x00, 0x00, 0x00, 0x03, 0x4e, 0x43,
				0x30, 0x14, 0x00, 0x00, 0x00, 0x0c, 0x72, 0x65, 0x73, 0x6f,
				0x6c, 0x76, 0x65, 0x5f, 0x73, 0x74, 0x72, 0x00, 0x00, 0x00,
				0x00, 0x03, 0x00, 0x00, 0x00, 0x11, 0x00, 0x00, 0x00, 0x02,
				0x00, 0x02, 0x00, 0x06, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00,
				0x00, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x01,
				0x00, 0x01, 0x01, 0x09, 0x4e, 0x45, 0x4f, 0x00, 0x00, 0x00,
				0x00, 0x02, 0x00, 0x14, 0x67, 0x43, 0x00, 0x00, 0x00, 0x06,
				0x48, 0x65, 0x6c, 0x6c, 0x6f, 0x00 };
	}

	public Object resolve_str(String name) throws IOException {
		IIOPRequest1_2 request = new IIOPRequest1_2(6, "resolve_str");
		IIOPPackage pckg = new IIOPPackage(request);

		Socket socket = new Socket(ip, port);
		OutputStream os = socket.getOutputStream();
		// InputStream is = socket.getInputStream();

		os.write(pckg.toBytes());

		os.flush();
		
		socket.close();

		return null;
	}

}
