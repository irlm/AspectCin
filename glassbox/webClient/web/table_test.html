<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<link href="css/style.css" rel="stylesheet" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />


<script type='text/javascript'>

function startup() {
   var myArray = new Array("1","2","3","4","5");
   updateRows(myArray);
}

var currentSelectedRow = null;

function rowSingleClick(x) {    
    //parent.contentarea.location.href='OperationDetails.form?operationId=' + x.id;   
    if ( x.style ) {
        x.style.backgroundColor = ('red' == x.style.backgroundColor)? 'white' : 'red';
    }
    if(currentSelectedRow != null) {
       currentSelectedRow.style.backgroundColor = ('red' == currentSelectedRow.style.backgroundColor)? 'white' : 'red';
    }
   currentSelectedRow = x;
}


function updateRows(data) {

    var tbody = document.getElementById("operationTable");
    for(var i = 0; i < data.length; i++) {
        //
        //What to first check if the row exists..
        var row;

        //if((row = document.getElementById("????")) != null){
        //
        //updateColumns(data, row);

        //Otherwise create it.
        var row = document.createElement("tr");
        row.style.backgroundColor = 'white';
        row.onclick = function(event) {rowSingleClick(this)};
        
        //Need to cannonically name from the data, so we can lookup for details.
        row.id="bodyRow:" + i;
        buildColumns(data[i], row);
        tbody.appendChild(row);
   }
}

/*
*Temporary column data, will be provided dynamically via DWR
*/
var colArray = new Array("1","2","3","4","5");

/**
*Build a list of columns.
*
*/
function buildColumns(data, row) {
   for(var i = 0; i < colArray.length; i++) {

        var col = document.createElement("td");
        var spanNode = document.createElement("span");
	spanNode.appendChild(document.createTextNode(data.status));
	spanNode.id="FIXME"
        col.appendChild(spanNode);
        col.className=colArray[i];
        col.id=row.id + ":bodyCol:" + i;
        row.appendChild(col);
   
   }
}

function updateColumns(data, row) {
   for(var i = 0; i < colArray.length; i++) {
   
   }
}



</script>
</head>

<body onload="javascript:startup();">
    <table class="operationTableBody" id="operationTableBody">
        <thead>
	<tr class="operationTableRow" height="0em">
	<th class="statusHead" height="0em"></th> 
	<th class="analysisHead" height="0em"></th> 
	<th class="viewedHead" height="0em"></th>
	<th class="operationNameHead" height="0em"></th>
	<th class="executionsHead" height="0em"></th>
	</tr>
	</thead>
        <tbody id="operationTable">	     
	</tbody>
</table>
</body>
</html>